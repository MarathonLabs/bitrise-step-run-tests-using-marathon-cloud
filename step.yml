#
# A couple of useful guides & docs:
#
# - Main Bitrise CLI docs: https://github.com/bitrise-io/bitrise/tree/master/_docs
# - Step Development Guideline: https://github.com/bitrise-io/bitrise/blob/master/_docs/step-development-guideline.md
# - Bitrise.yml format spec: https://github.com/bitrise-io/bitrise/blob/master/_docs/bitrise-yml-format-spec.md
# - Bitrise docs: http://devcenter.bitrise.io/
# - Bitrise CLI guides: http://devcenter.bitrise.io/bitrise-cli/

title: |-
  Run tests using Marathon Cloud
summary: |
  Run all your automated tests in just 15 minutes, no matter how many tests you have
description: |
  With this action you can easily run your Android instrumentation and iOS tests. Marathon Cloud is designed to run all your automated tests in just 15 minutes, no matter how many tests you have.
website: https://marathonlabs.io
source_code_url: https://github.com/MarathonLabs/bitrise-step-run-tests-using-marathon-cloud
support_url: https://github.com/MarathonLabs/bitrise-step-run-tests-using-marathon-cloud/issues

# If this step should be available only for certain project types
# just uncomment this `project_type_tags` section and include all the
# project types supported by the step. If the step can be used for all
# project types then you can just remove this section.
# If no `project_type_tags` specified (or specified as an empty array)
# that means the step can be used for any project type.
# You can find more information about project type tags in the Step Development Guideline:
# https://github.com/bitrise-io/bitrise/blob/master/_docs/step-development-guideline.md
#
project_type_tags:
  - ios
#   - macos
  - android
#   - xamarin
#   - react-native
#   - cordova
#   - ionic
#   - flutter

# Type tags are used for categorizing steps, for easier step discovery in Step Libraries.
# You can find more information about type tags in the Step Development Guideline:
# https://github.com/bitrise-io/bitrise/blob/master/_docs/step-development-guideline.md
type_tags:
  - test

# These properties define whether a Step is run in a given Workflow or not.
# You can find more information about this in the documentation here:
# https://devcenter.bitrise.io/en/steps-and-workflows/developing-your-own-bitrise-step/developing-a-new-step.html#setting-conditions-for-running-the-step
#
# is_always_run: false
# is_skippable: false
# run_if: ""

# Use the `deps` property to declare dependencies that you can fetch from an OS dependency manager.
# You can find more information about this in the documentation here:
# https://devcenter.bitrise.io/en/steps-and-workflows/developing-your-own-bitrise-step/developing-a-new-step.html#submodules-and-step-dependencies
#
deps:
  brew:
  - name: malinskiy/tap/marathon-cloud
#   apt_get:
#   - name: cmake


toolkit:
  bash:
    entry_file: step.sh


inputs:
  - application: ""
    opts:
      title: App File
      summary: Application binary path, e.g. apk file for Android or zip file of iOS Application
      description: |
        **Android**: `application` should point to the APK file. **iOS**: `application` should point to an ARM compatible Simulator build packaged in an ipa format or a zip archive.
      is_expand: true
      is_required: true
  - test_application: ""
    opts:
      title: Test App File
      summary: Test application binary path, e.g. apk file for Android or zip file of iOS Test Runner app
      description: |
        **Android**: `test_application` should point to the test .apk file for your app. **iOS**: `test_application` should point to an ARM compatible iOS Test Runner app packaged in an ipa format or a zip archive.
      is_expand: true
      is_required: true
  - platform: ""
    opts:
      title: Testing platform
      summary: Testing platform. Android or iOS only
      description: ""
      is_expand: true
      is_required: true
  - api_key:
    opts:
      title: Marathon Cloud API key
      summary: API key for authenticating with Marathon Cloud
      description: ""
      is_expand: true
      is_required: true
      is_sensitive: true
  - docker_image: marathonlabs/marathon-cloud:latest
    opts:
      title: Docker image to use for running marathon-cloud cli on Linux hosts
      summary: You can specify your own custom image with a Docker Registry proxy here
      description: ""
      is_required: false
